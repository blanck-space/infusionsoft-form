<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/hyperform/0.9.5/hyperform.min.css">
<link rel="stylesheet" href="https://cdn.rawgit.com/blanck-space/infusionsoft-form/master/formstyles.css">
<div class="inf-form-mod">
<form accept-charset="UTF-8" name="infusion-form-modular" action="https://je162.infusionsoft.com/app/form/process/bb33c227ab8e000e67c113fd9e51cd09" class="infusion-form" method="POST">
    <input name="inf_form_xid" type="hidden" value="bb33c227ab8e000e67c113fd9e51cd09" />
    <input name="inf_form_name" type="hidden" value="Aviral test form" />
    <input name="infusionsoft_version" type="hidden" value="1.64.0.48" />
    <div class="infusion-field">
        <label for="inf_custom_SATTPVSelector">Select Your Event *</label>
        <select id="inf_custom_SATTPVSelector" name="inf_custom_SATTPVSelector" required>
		<option value="">Select your event</option>
		<option value="1">8th May 2017, Monday, 18:30, Geneva, Crowne Plaza Geneva</option>
		<option value="2">9th May 2017, Tuesday, 12:30, Geneva, InterContinental Geneva</option>
		<option value="3">9th May 2017, Tuesday, 18:30, Geneva, InterContinental Geneva</option>
		<option value="4">10th May 2017, Wednesday, 12:30, Lausanne, Lausanne Palace</option>
		<option value="5">10th May 2017, Wednesday, 18:30, Lausanne, Lausanne Palace</option>
		<option value="6">11th May 2017, Thursday, 12:30, Basel, Radisson Blu</option>
		<option value="7">11th May 2017, Thursday, 18:30, Basel, Radisson Blu</option>
		<option value="8">12th May 2017, Friday, 12:30, Zurich, Crowne Plaza Zürich </option>
		<option value="9">13th May 2017, Saturday, 10:30, Zurich, Novotel Zürich City West </option>
		<option value="10">15th May 2017, Monday, 12:30, Zurich, Zurich Marriott Hotel</option>
		<option value="11">16th May 2017, Tuesday, 12:30, Munich, Courtyard by Marriott Munich City Center</option>
		<option value="12">16th May 2017, Tuesday, 18:30, Munich, Courtyard by Marriott Munich City Center</option>
		<option value="13">17th May 2017, Wednesday, 12:30, Vienna, Hotel TBA</option>
		<option value="14">17th May 2017, Wednesday, 18:30, Vienna, Hotel TBA </option>
	</select>
    </div>
<!--
**********************
**********************
DO NOT CHANGE ANYTHING FROM HERE.....
**********************
*********************-->
    <div class="form-fields-wrapper">
      <div class="row">
        <div class="infusion-field">
          <label for="inf_field_FirstName">First Name *</label>
          <input class="infusion-field-input-container" id="inf_field_FirstName" name="inf_field_FirstName" type="text" placeholder="First Name" onkeyup="checkform()" required/>
        </div>
        <div class="infusion-field">
            <label for="inf_field_LastName">Last Name *</label>
            <input class="infusion-field-input-container" id="inf_field_LastName" name="inf_field_LastName" type="text" placeholder="Last Name" onkeyup="checkform()" required/>
        </div>
      </div>
        <div class="infusion-field">
            <label for="inf_field_Email">Email *</label>
            <input class="infusion-field-input-container" id="inf_field_Email" name="inf_field_Email" type="email" placeholder="Email" onkeyup="checkform()" required pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$" data-pattern-mismatch="Please enter correct email address."/>
        </div>
        <div class="infusion-field">
            <label for="inf_field_Phone1">Cell Phone *</label>
            <input class="infusion-field-input-container" id="phone-tf" type="tel" placeholder="Cell Phone" required/>
            <span id="valid-msg" class="hide">✓ Valid</span>
            <span id="error-msg" class="hide">Invalid number</span>
        </div>
    </div>
    <input type="hidden" id="inf_field_Phone1" name="inf_field_Phone1">
    <input name="inf_custom_GaMedium" type="hidden" value="null" />
    <input name="inf_custom_GaSource" type="hidden" value="null" />
    <input name="inf_custom_GaTerm" type="hidden" value="null" />
    <input name="inf_custom_GaCampaign" type="hidden" value="null" />
    <input name="inf_custom_GaContent" type="hidden" value="null" />
    <input name="inf_custom_IPAddress" type="hidden" value="null" />
    <input name="inf_custom_GaReferurl" type="hidden" value="null" />
    <div class="infusion-submit">
        <input type="submit" value="Submit" id="is-submitbutton" />
    </div>

    <!--**********************
    **********************
     DO NOT CHANGE UNTIL HERE
     **********************
     **********************-->
</form>
</div>
<!--**********************
If site already uses jQuery then delete the following line:
**********************-->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="https://cdn.rawgit.com/blanck-space/infusionsoft-form/master/intlTelInput.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/hyperform/0.9.5/hyperform.min.js"></script>
<script>
jQuery( document ).ready(function($) {
  var f = document.forms["infusion-form-modular"].elements;
  var telInput = $("#phone-tf"),
    firstName = $("#inf_field_FirstName"),
    lastName = $("#inf_field_LastName"),
    emailInput = $("#inf_field_Email"),
    errorMsg = $("#error-msg"),
    validMsg = $("#valid-msg");
    var numberState = false,
    canProceed = false;

  // initialise plugin
  telInput.intlTelInput({
    initialCountry: "auto",
    geoIpLookup: function(callback) {
      $.get('http://ipinfo.io', function() {}, "jsonp").always(function(resp) {
        var countryCode = (resp && resp.country) ? resp.country : "";
        callback(countryCode);
      });
    },
    preferredCountries: ['ie', 'it'],
    separateDialCode: true,
    utilsScript: "https://cdn.rawgit.com/blanck-space/infusionsoft-form/master/utils.js",
  });

  var reset = function() {
    telInput.removeClass("error");
    errorMsg.addClass("hide");
    validMsg.addClass("hide");
  };

  // on blur: validate
  telInput.blur(function() {
    checkform();
    reset();
    if ($.trim(telInput.val())) {
      if (telInput.intlTelInput("isValidNumber")) {
        validMsg.removeClass("hide");
        numberState = true;
      } else {
        telInput.addClass("error");
        errorMsg.removeClass("hide");
        numberState = false;
      }
    }
  });

  // on keyup / change flag: reset
  telInput.on("keyup change", function(){reset();checkform();});
  hyperform(document.forms["infusion-form-modular"]);
  function checkform() {
      var countryData = $("#phone-tf").intlTelInput("getSelectedCountryData");
      $("#inf_field_Phone1").val("+"+countryData.dialCode+" "+$("#phone-tf").val());
      console.log($("#inf_field_Phone1").val());
      // var cansubmit = true;
      // var f = document.forms["infusion-form-modular"].elements;
      // for (var i = 0; i < f.length; i++) {
      //     if ("value" in f[i] && f[i].value.length == 0)
      //         cansubmit = false;
      //         canProceed=0;
      // }
      // document.getElementById('is-submitbutton').disabled = !cansubmit;
  }
  window.onload = checkform;

  $('form').submit(function(e){
    canProceed=1;
    checkform();
    if(e.target.disabled==true){
      alert("Please fill in form details before submitting.");
    }
    // var states = {
    //   'phone' : telInput.hasClass('hf-user-valid')&&(!telInput.hasClass('error')),
    //   'names' : firstName.hasClass('hf-user-valid')&&lastName.hasClass('hf-user-valid'),
    //   'email' : emailInput.hasClass('hf-user-valid')
    // }
    // if(!(states.phone&&states.names&&states.email&&numberState&&document.getElementById('inf_custom_SATTPVSelector').value)){

    if(!(numberState&&document.getElementById('inf_custom_SATTPVSelector').value)){
      alert("Please make sure all information provided is valid before submitting.")
      e.preventDefault();
    }else{
      console.log('submitting!')
    }
  });
});
</script>
<script type="text/javascript" src="https://je162.infusionsoft.com/app/webTracking/getTrackingCode"></script>
<!-- iTracker360 JS Snippet -->
<script type="text/javascript" src="https://d2ieqaiwehnqqp.cloudfront.net/t4a9464b4efe32655b237c3565f677ab2.js"></script>
